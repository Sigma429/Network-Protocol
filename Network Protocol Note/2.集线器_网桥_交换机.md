## 1.搭建Java服务器开发环境

Tomcat、servlet

![image-20230812184859047](imgs\image-20230812184859047.png)

## 2.基本概念

### 2.1 通信基础

![image-20230813154856225](imgs\image-20230813154856225.png)

![image-20230813154705296](imgs\image-20230813154705296.png)

![image-20230813154731891](imgs\image-20230813154731891.png)

### 2.2 计算机连接方式

#### 2.2.1网线直连

![image-20230813182519147](imgs\image-20230813182519147.png)

<img src="imgs\image-20230813171201863.png" alt="image-20230813171201863"  />

ARP协议:广播，在同一个网段中传播

Mac地址全为F，代表广播

ICMP协议无法得到Mac地址

**先走ARP广播协议发送广播包获取Mac地址，再走ping的ICMP协议（真的要发送数据包）**

根据ip地址知道对方Mac地址，才能传输数据

![image-20230813182608459](imgs\image-20230813182608459.png)

#### 2.2.2同轴电缆

同轴电缆：会到处发数据（没有智商）

同一时间只能有一个在通信，其他设备发的话会检测电缆上有没有设备通信，有的话，会等待 

半双工通信：不能同时发送，接收

终结电阻：吸收电子，终结信号，防止信号叠加

发数据给对方，最终要知道对方的Mac地址，数据包里会有Mac地址

网卡拿的数据，发现目标Mac地址不是自己的，就会丢弃，只有符合的会拿到

![image-20230815172736763](imgs\image-20230815172736763.png)

![image-20230813185325255](imgs\image-20230813185325255.png)

#### 2.2.3集线器

集线器没有智商，连接的就会发送信号，有多少连接发多少

设备过多的话，导致长时间占用线路，设备越多，效率越低

安全方面，弄一个抓包，即使mac地址不对，也能获取数据

相当于一个大的冲突域

![image-20230815154800826](imgs\image-20230815154800826.png)

![image-20230815160455154](imgs\image-20230815160455154.png)

hub的arp没有缓存mac地址，计算机有缓存，命令行 arp -a 可查看缓存 

ARP协议拿到目标Mac地址后，后续再发信息（有缓存），直接就是ICMP协议

![image-20230815161242851](imgs\image-20230815161242851.png)

![image-20230815161949075](imgs\image-20230815161949075.png)

![image-20230815163724213](imgs\image-20230815163724213.png)

#### 2.2.4网桥

网桥就两个接口，只能隔绝两个冲突域

即使能隔绝冲突域，但冲突域内的设备仍会冲突

![image-20230815172418766](imgs\image-20230815172418766.png)

![image-20230815165017191](imgs\image-20230815165017191.png)

![image-20230815165227337](imgs\image-20230815165227337.png)

目标mac地址在左边，就不会放右边

![image-20230815165512946](imgs\image-20230815165512946.png)

网桥记录足够多mac地址，就会形成冲突域

冲突域范围内发数据，不会发到其他冲突域处，不同冲突域可以实现同时通讯

![image-20230815165739902](imgs\image-20230815165739902.png)

4返回ARP包时携带0的mac地址，此时网桥已经知道0的mac地址，不会放右边，并且记录4的mac地址

![image-20230815171353877](imgs\image-20230815171353877.png)

0再给4发一次，直接发ICMP，此时网桥已经知道4的mac地址，不会放右边

![image-20230815171822215](imgs\image-20230815171822215.png)

#### 2.2.5交换机

局域网最终方案（升级版网桥+集线器）

交换机全部学习完后，能很精准的发送数据，不会被抓包，相较集线器安全

交换机连接的是同一个网段里的，如果在同一网段，给美国的计算机通信，广播跑来跑去的，效率低（广播风暴）

![image-20230815185150187](imgs\image-20230815185150187.png)

![image-20230815173248502](imgs\image-20230815173248502.png)

#### 2.2.6路由器

同一网段传数据不要用路由器，用交换机

隔绝广播域：主机发APR广播获取该网段网关的Mac地址，广播传不到另一网段中

![image-20230815185308538](imgs\image-20230815185308538.png)

![image-20230816161000530](imgs\image-20230816161000530.png)

不同网段之间发数据，路由器和主机配网关地址，主机网段与路由器网关在同一网段下

![image-20230816154147129](imgs\image-20230816154147129.png)

不同网段之间发数据，先通过发ARP协议来获取网关mac地址，再发ICMP

![image-20230816154046055](imgs\image-20230816154046055.png)

获取网关mac地址后，ICMP传数据到路由器，另一网段的网关再次发ARP获取目标主机的Mac地址，最后发ICMP

![image-20230816154556171](imgs\image-20230816154556171.png)

